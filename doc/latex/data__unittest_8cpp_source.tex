\hypertarget{data__unittest_8cpp_source}{}\section{data\+\_\+unittest.\+cpp}
\label{data__unittest_8cpp_source}\index{test/data\_unittest.cpp@{test/data\_unittest.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#include "../lib/catch.hpp"}}
\DoxyCodeLine{00013 }
\DoxyCodeLine{00014 \textcolor{preprocessor}{\#include "../src/data.h"}}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Convert a vector<vector<int> object to int**"}, \textcolor{stringliteral}{"[vector2DToArray2D]"})}
\DoxyCodeLine{00019 \{}
\DoxyCodeLine{00020     \textcolor{comment}{// // Initialize vector}}
\DoxyCodeLine{00021     \textcolor{comment}{// std::vector<std::vector<int>> vec;}}
\DoxyCodeLine{00022     \textcolor{comment}{// for (int i = 0; i < 4; i++)}}
\DoxyCodeLine{00023     \textcolor{comment}{// \{}}
\DoxyCodeLine{00024     \textcolor{comment}{//     for (int j = 0; j < 4; j++)}}
\DoxyCodeLine{00025     \textcolor{comment}{//     \{}}
\DoxyCodeLine{00026     \textcolor{comment}{//         vec[i].push\_back(j);}}
\DoxyCodeLine{00027     \textcolor{comment}{//     \}}}
\DoxyCodeLine{00028     \textcolor{comment}{// \}}}
\DoxyCodeLine{00029 }
\DoxyCodeLine{00030     \textcolor{comment}{// int **result = vector2DToArray2D(vec);}}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032     \textcolor{comment}{// for (int i = 0; i < 4; i++)}}
\DoxyCodeLine{00033     \textcolor{comment}{// \{}}
\DoxyCodeLine{00034     \textcolor{comment}{//     for (int j = 0; j < 4; j++)}}
\DoxyCodeLine{00035     \textcolor{comment}{//     \{}}
\DoxyCodeLine{00036     \textcolor{comment}{//         CHECK(result[i][j] == vec[i][j]);}}
\DoxyCodeLine{00037     \textcolor{comment}{//     \}}}
\DoxyCodeLine{00038     \textcolor{comment}{// \}}}
\DoxyCodeLine{00039 }
\DoxyCodeLine{00040     \textcolor{comment}{// // Clean up}}
\DoxyCodeLine{00041     \textcolor{comment}{// // for (int i = 0; i < 4; i++)}}
\DoxyCodeLine{00042     \textcolor{comment}{// // \{}}
\DoxyCodeLine{00043     \textcolor{comment}{// //     delete[] result[i];}}
\DoxyCodeLine{00044     \textcolor{comment}{// // \}}}
\DoxyCodeLine{00045     \textcolor{comment}{// delete[] result;}}
\DoxyCodeLine{00046 \}}
\DoxyCodeLine{00047 }
\DoxyCodeLine{00048 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Convert 2D array to 1D Row-Major"}, \textcolor{stringliteral}{"[array2DTo1DRowMajor]"})}
\DoxyCodeLine{00049 \{}
\DoxyCodeLine{00050     \textcolor{comment}{// Initialize array}}
\DoxyCodeLine{00051     \textcolor{keywordtype}{int} **array = \textcolor{keyword}{new} \textcolor{keywordtype}{int} *[4];}
\DoxyCodeLine{00052     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++)}
\DoxyCodeLine{00053     \{}
\DoxyCodeLine{00054         array[i] = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[4];}
\DoxyCodeLine{00055         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 4; j++)}
\DoxyCodeLine{00056         \{}
\DoxyCodeLine{00057             array[i][j] = j;}
\DoxyCodeLine{00058         \}}
\DoxyCodeLine{00059     \}}
\DoxyCodeLine{00060 }
\DoxyCodeLine{00061     \textcolor{keywordtype}{int} *result = \mbox{\hyperlink{data_8cpp_a3a660ef9ff9008d793e691b81c43ce2b}{array2DTo1DRowMajor}}(array, 4, 4);}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (4 * 4); i++)}
\DoxyCodeLine{00064     \{}
\DoxyCodeLine{00065         CHECK(result[i] == (i \% 4));}
\DoxyCodeLine{00066     \}}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068     \textcolor{comment}{// Clean up}}
\DoxyCodeLine{00069     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++)}
\DoxyCodeLine{00070     \{}
\DoxyCodeLine{00071         \textcolor{keyword}{delete}[] array[i];}
\DoxyCodeLine{00072     \}}
\DoxyCodeLine{00073     \textcolor{keyword}{delete}[] array;}
\DoxyCodeLine{00074     \textcolor{keyword}{delete}[] result;}
\DoxyCodeLine{00075 \}}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Prepare Data for Gathering: 1x4"}, \textcolor{stringliteral}{"[prepareData]"})}
\DoxyCodeLine{00078 \{}
\DoxyCodeLine{00079     \textcolor{keywordtype}{int} elementsPerLine = 4;}
\DoxyCodeLine{00080     std::vector<std::vector<int>> vec;}
\DoxyCodeLine{00081     std::vector<int> l0 = \{1, 2, 3, 4\};}
\DoxyCodeLine{00082     vec.push\_back(l0);}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084     \textcolor{keywordtype}{int} *arr = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[vec.size() * 4];}
\DoxyCodeLine{00085     \mbox{\hyperlink{data_8cpp_a0555064a00cfa5563cce34c929f8c7af}{prepareData}}(vec, arr);}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087     CHECK(arr[0] == vec[0][0]);}
\DoxyCodeLine{00088     CHECK(arr[1] == vec[0][1]);}
\DoxyCodeLine{00089     CHECK(arr[2] == vec[0][2]);}
\DoxyCodeLine{00090     CHECK(arr[3] == vec[0][3]);}
\DoxyCodeLine{00091 \}}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Convert 2D Array to 1D Array in Row-Major Order"}, \textcolor{stringliteral}{"[array2DTo1DRowMajor]"})}
\DoxyCodeLine{00094 \{}
\DoxyCodeLine{00095     \textcolor{keywordtype}{int} **arr2D = \textcolor{keyword}{new} \textcolor{keywordtype}{int} *[1];}
\DoxyCodeLine{00096     arr2D[0] = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[4];}
\DoxyCodeLine{00097 }
\DoxyCodeLine{00098     arr2D[0][0] = 1;}
\DoxyCodeLine{00099     arr2D[0][1] = 2;}
\DoxyCodeLine{00100     arr2D[0][2] = 3;}
\DoxyCodeLine{00101     arr2D[0][3] = 4;}
\DoxyCodeLine{00102 }
\DoxyCodeLine{00103     \textcolor{keywordtype}{int} *arr1D = \mbox{\hyperlink{data_8cpp_a3a660ef9ff9008d793e691b81c43ce2b}{array2DTo1DRowMajor}}(arr2D, 1, 4);}
\DoxyCodeLine{00104 }
\DoxyCodeLine{00105     CHECK(arr1D[0] == arr2D[0][0]);}
\DoxyCodeLine{00106     CHECK(arr1D[1] == arr2D[0][1]);}
\DoxyCodeLine{00107     CHECK(arr1D[2] == arr2D[0][2]);}
\DoxyCodeLine{00108     CHECK(arr1D[3] == arr2D[0][3]);}
\DoxyCodeLine{00109 \}}
\DoxyCodeLine{00110 }
\DoxyCodeLine{00111 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Prepare Data for Gathering: 2x4"}, \textcolor{stringliteral}{"[prepareData]"})}
\DoxyCodeLine{00112 \{}
\DoxyCodeLine{00113     \textcolor{keywordtype}{int} elementsPerLine = 4;}
\DoxyCodeLine{00114     std::vector<std::vector<int>> vec;}
\DoxyCodeLine{00115     std::vector<int> l0 = \{1, 2, 3, 4\};}
\DoxyCodeLine{00116     std::vector<int> l1 = \{5, 6, 7, 8\};}
\DoxyCodeLine{00117     vec.push\_back(l0);}
\DoxyCodeLine{00118     vec.push\_back(l1);}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120     \textcolor{keywordtype}{int} *arr = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[vec.size() * 4];}
\DoxyCodeLine{00121     \mbox{\hyperlink{data_8cpp_a0555064a00cfa5563cce34c929f8c7af}{prepareData}}(vec, arr);}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123     CHECK(arr[0] == vec[0][0]);}
\DoxyCodeLine{00124     CHECK(arr[1] == vec[0][1]);}
\DoxyCodeLine{00125     CHECK(arr[2] == vec[0][2]);}
\DoxyCodeLine{00126     CHECK(arr[3] == vec[0][3]);}
\DoxyCodeLine{00127     CHECK(arr[4] == vec[1][0]);}
\DoxyCodeLine{00128     CHECK(arr[5] == vec[1][1]);}
\DoxyCodeLine{00129     CHECK(arr[6] == vec[1][2]);}
\DoxyCodeLine{00130     CHECK(arr[7] == vec[1][3]);}
\DoxyCodeLine{00131 \}}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Check criteria for local data: true"}, \textcolor{stringliteral}{"[checkCriteriaLocal]"})}
\DoxyCodeLine{00134 \{}
\DoxyCodeLine{00135     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00136     \textcolor{keywordtype}{int} arraySize = 4;}
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138     std::vector<int> d0 = \{12, 3, 4, 1\};}
\DoxyCodeLine{00139     std::vector<int> d1 = \{3, 46, 1, 1\};}
\DoxyCodeLine{00140     std::vector<int> d2 = \{4, 1, 38, 2\};}
\DoxyCodeLine{00141     std::vector<int> d3 = \{3, 2, 1, 25\};}
\DoxyCodeLine{00142     localData.push\_back(d0);}
\DoxyCodeLine{00143     localData.push\_back(d1);}
\DoxyCodeLine{00144     localData.push\_back(d2);}
\DoxyCodeLine{00145     localData.push\_back(d3);}
\DoxyCodeLine{00146 }
\DoxyCodeLine{00147     \textcolor{keywordtype}{int} maxLocal;}
\DoxyCodeLine{00148 }
\DoxyCodeLine{00149     \textcolor{keywordtype}{bool} resultLocal = \mbox{\hyperlink{data_8cpp_abf9ef0211f65026775fa7c1056b754fe}{checkCriteriaLocal}}(localData, arraySize, 0, 1, \&maxLocal);}
\DoxyCodeLine{00150 }
\DoxyCodeLine{00151     CHECK(resultLocal == \textcolor{keyword}{true});}
\DoxyCodeLine{00152     CHECK(maxLocal == 46);}
\DoxyCodeLine{00153 \}}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Check criteria for local data: false"}, \textcolor{stringliteral}{"[checkCriteriaLocal]"})}
\DoxyCodeLine{00156 \{}
\DoxyCodeLine{00157     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00158     \textcolor{keywordtype}{int} arraySize = 4;}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160     std::vector<int> d0 = \{12, 3, 4, 1\};}
\DoxyCodeLine{00161     std::vector<int> d1 = \{3, 1, 1, 1\};}
\DoxyCodeLine{00162     std::vector<int> d2 = \{4, 1, 38, 2\};}
\DoxyCodeLine{00163     std::vector<int> d3 = \{3, 2, 1, 25\};}
\DoxyCodeLine{00164     localData.push\_back(d0);}
\DoxyCodeLine{00165     localData.push\_back(d1);}
\DoxyCodeLine{00166     localData.push\_back(d2);}
\DoxyCodeLine{00167     localData.push\_back(d3);}
\DoxyCodeLine{00168 }
\DoxyCodeLine{00169     \textcolor{keywordtype}{int} maxLocal;}
\DoxyCodeLine{00170 }
\DoxyCodeLine{00171     \textcolor{keywordtype}{bool} resultLocal = \mbox{\hyperlink{data_8cpp_abf9ef0211f65026775fa7c1056b754fe}{checkCriteriaLocal}}(localData, arraySize, 0, 1, \&maxLocal);}
\DoxyCodeLine{00172 }
\DoxyCodeLine{00173     CHECK(resultLocal == \textcolor{keyword}{false});}
\DoxyCodeLine{00174     CHECK(maxLocal == 38);}
\DoxyCodeLine{00175 \}}
\DoxyCodeLine{00176 }
\DoxyCodeLine{00177 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Calculate Local B Lines: Process 0, 4 Lines, 4 Processes"}, \textcolor{stringliteral}{"[calculateBLocal]"})}
\DoxyCodeLine{00178 \{}
\DoxyCodeLine{00179     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00180     \textcolor{keywordtype}{int} arraySize = 4, myRank = 0, max = 12, processes = 4;}
\DoxyCodeLine{00181 }
\DoxyCodeLine{00182     std::vector<int> d0 = \{8, 1, 2, 2\};}
\DoxyCodeLine{00183     localData.push\_back(d0);}
\DoxyCodeLine{00184 }
\DoxyCodeLine{00185     \textcolor{keywordtype}{int} min, minX, minY;}
\DoxyCodeLine{00186 }
\DoxyCodeLine{00187     std::vector<std::vector<int>> localB = \mbox{\hyperlink{data_8cpp_a6fa50f0193e86a0cf4be42afd2aa3056}{calculateBLocal}}(localData, max, arraySize, myRank, processes, \&min, \&minX, \&minY);}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189     std::vector<std::vector<int>> controlB;}
\DoxyCodeLine{00190 }
\DoxyCodeLine{00191     std::vector<int> c0 = \{12, 11, 10, 10\};}
\DoxyCodeLine{00192     controlB.push\_back(c0);}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194     CHECK(localB[0][0] == controlB[0][0]);}
\DoxyCodeLine{00195     CHECK(localB[0][1] == controlB[0][1]);}
\DoxyCodeLine{00196     CHECK(localB[0][2] == controlB[0][2]);}
\DoxyCodeLine{00197     CHECK(localB[0][3] == controlB[0][3]);}
\DoxyCodeLine{00198 }
\DoxyCodeLine{00199     CHECK(min == 10);}
\DoxyCodeLine{00200     CHECK(minX == 0);}
\DoxyCodeLine{00201     CHECK(minY == 2);}
\DoxyCodeLine{00202 \}}
\DoxyCodeLine{00203 }
\DoxyCodeLine{00204 \mbox{\hyperlink{networking__unittest_8cpp_aaf7e8778df83d15dcc1031e591e20b2c}{TEST\_CASE}}(\textcolor{stringliteral}{"Calculate Local B Lines: Process 1, 4 Lines, 4 Processes"}, \textcolor{stringliteral}{"[calculateBLocal]"})}
\DoxyCodeLine{00205 \{}
\DoxyCodeLine{00206     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00207     \textcolor{keywordtype}{int} arraySize = 4, myRank = 1, max = 12, processes = 4;}
\DoxyCodeLine{00208 }
\DoxyCodeLine{00209     std::vector<int> d0 = \{2, 12, 4, 1\};}
\DoxyCodeLine{00210     localData.push\_back(d0);}
\DoxyCodeLine{00211 }
\DoxyCodeLine{00212     \textcolor{keywordtype}{int} min, minX, minY;}
\DoxyCodeLine{00213 }
\DoxyCodeLine{00214     std::vector<std::vector<int>> localB = \mbox{\hyperlink{data_8cpp_a6fa50f0193e86a0cf4be42afd2aa3056}{calculateBLocal}}(localData, max, arraySize, myRank, processes, \&min, \&minX, \&minY);}
\DoxyCodeLine{00215 }
\DoxyCodeLine{00216     std::vector<std::vector<int>> controlB;}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218     std::vector<int> c0 = \{10, 12, 8, 11\};}
\DoxyCodeLine{00219     controlB.push\_back(c0);}
\DoxyCodeLine{00220 }
\DoxyCodeLine{00221     CHECK(localB[0][0] == controlB[0][0]);}
\DoxyCodeLine{00222     CHECK(localB[0][1] == controlB[0][1]);}
\DoxyCodeLine{00223     CHECK(localB[0][2] == controlB[0][2]);}
\DoxyCodeLine{00224     CHECK(localB[0][3] == controlB[0][3]);}
\DoxyCodeLine{00225 }
\DoxyCodeLine{00226     CHECK(min == 8);}
\DoxyCodeLine{00227     CHECK(minX == 1);}
\DoxyCodeLine{00228     CHECK(minY == 2);}
\DoxyCodeLine{00229 \}}

\end{DoxyCode}
