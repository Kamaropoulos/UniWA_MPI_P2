\hypertarget{data__unittest_8cpp_source}{}\section{data\+\_\+unittest.\+cpp}
\label{data__unittest_8cpp_source}\index{test/data\_unittest.cpp@{test/data\_unittest.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 }
\DoxyCodeLine{00012 \textcolor{preprocessor}{\#include "../lib/catch.hpp"}}
\DoxyCodeLine{00013 }
\DoxyCodeLine{00014 \textcolor{preprocessor}{\#include "../src/data.h"}}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018 TEST\_CASE(\textcolor{stringliteral}{"Prepare Data for Gathering: 1x4"}, \textcolor{stringliteral}{"[prepareData]"})}
\DoxyCodeLine{00019 \{}
\DoxyCodeLine{00020     \textcolor{keywordtype}{int} elementsPerLine = 4;}
\DoxyCodeLine{00021     std::vector<std::vector<int>> vec;}
\DoxyCodeLine{00022     std::vector<int> l0 = \{1, 2, 3, 4\};}
\DoxyCodeLine{00023     vec.push\_back(l0);}
\DoxyCodeLine{00024 }
\DoxyCodeLine{00025     \textcolor{keywordtype}{int} *arr = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[vec.size() * 4];}
\DoxyCodeLine{00026     \mbox{\hyperlink{data_8cpp_a0555064a00cfa5563cce34c929f8c7af}{prepareData}}(vec, arr);}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028     CHECK(arr[0] == vec[0][0]);}
\DoxyCodeLine{00029     CHECK(arr[1] == vec[0][1]);}
\DoxyCodeLine{00030     CHECK(arr[2] == vec[0][2]);}
\DoxyCodeLine{00031     CHECK(arr[3] == vec[0][3]);}
\DoxyCodeLine{00032 \}}
\DoxyCodeLine{00033 }
\DoxyCodeLine{00034 TEST\_CASE(\textcolor{stringliteral}{"Convert 2D Array to 1D Array in Row-Major Order"}, \textcolor{stringliteral}{"[array2DTo1DRowMajor]"})}
\DoxyCodeLine{00035 \{}
\DoxyCodeLine{00036     \textcolor{keywordtype}{int} **arr2D = \textcolor{keyword}{new} \textcolor{keywordtype}{int} *[1];}
\DoxyCodeLine{00037     arr2D[0] = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[4];}
\DoxyCodeLine{00038 }
\DoxyCodeLine{00039     arr2D[0][0] = 1;}
\DoxyCodeLine{00040     arr2D[0][1] = 2;}
\DoxyCodeLine{00041     arr2D[0][2] = 3;}
\DoxyCodeLine{00042     arr2D[0][3] = 4;}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044     \textcolor{keywordtype}{int} *arr1D = \mbox{\hyperlink{data_8cpp_a3a660ef9ff9008d793e691b81c43ce2b}{array2DTo1DRowMajor}}(arr2D, 1, 4);}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046     CHECK(arr1D[0] == arr2D[0][0]);}
\DoxyCodeLine{00047     CHECK(arr1D[1] == arr2D[0][1]);}
\DoxyCodeLine{00048     CHECK(arr1D[2] == arr2D[0][2]);}
\DoxyCodeLine{00049     CHECK(arr1D[3] == arr2D[0][3]);}
\DoxyCodeLine{00050 \}}
\DoxyCodeLine{00051 }
\DoxyCodeLine{00052 TEST\_CASE(\textcolor{stringliteral}{"Prepare Data for Gathering: 2x4"}, \textcolor{stringliteral}{"[prepareData]"})}
\DoxyCodeLine{00053 \{}
\DoxyCodeLine{00054     \textcolor{keywordtype}{int} elementsPerLine = 4;}
\DoxyCodeLine{00055     std::vector<std::vector<int>> vec;}
\DoxyCodeLine{00056     std::vector<int> l0 = \{1, 2, 3, 4\};}
\DoxyCodeLine{00057     std::vector<int> l1 = \{5, 6, 7, 8\};}
\DoxyCodeLine{00058     vec.push\_back(l0);}
\DoxyCodeLine{00059     vec.push\_back(l1);}
\DoxyCodeLine{00060 }
\DoxyCodeLine{00061     \textcolor{keywordtype}{int} *arr = \textcolor{keyword}{new} \textcolor{keywordtype}{int}[vec.size() * 4];}
\DoxyCodeLine{00062     \mbox{\hyperlink{data_8cpp_a0555064a00cfa5563cce34c929f8c7af}{prepareData}}(vec, arr);}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064     CHECK(arr[0] == vec[0][0]);}
\DoxyCodeLine{00065     CHECK(arr[1] == vec[0][1]);}
\DoxyCodeLine{00066     CHECK(arr[2] == vec[0][2]);}
\DoxyCodeLine{00067     CHECK(arr[3] == vec[0][3]);}
\DoxyCodeLine{00068     CHECK(arr[4] == vec[1][0]);}
\DoxyCodeLine{00069     CHECK(arr[5] == vec[1][1]);}
\DoxyCodeLine{00070     CHECK(arr[6] == vec[1][2]);}
\DoxyCodeLine{00071     CHECK(arr[7] == vec[1][3]);}
\DoxyCodeLine{00072 \}}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074 TEST\_CASE(\textcolor{stringliteral}{"Check criteria for local data: true"}, \textcolor{stringliteral}{"[checkCriteriaLocal]"})}
\DoxyCodeLine{00075 \{}
\DoxyCodeLine{00076     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00077     \textcolor{keywordtype}{int} arraySize = 4;}
\DoxyCodeLine{00078 }
\DoxyCodeLine{00079     std::vector<int> d0 = \{12, 3, 4, 1\};}
\DoxyCodeLine{00080     std::vector<int> d1 = \{3, 46, 1, 1\};}
\DoxyCodeLine{00081     std::vector<int> d2 = \{4, 1, 38, 2\};}
\DoxyCodeLine{00082     std::vector<int> d3 = \{3, 2, 1, 25\};}
\DoxyCodeLine{00083     localData.push\_back(d0);}
\DoxyCodeLine{00084     localData.push\_back(d1);}
\DoxyCodeLine{00085     localData.push\_back(d2);}
\DoxyCodeLine{00086     localData.push\_back(d3);}
\DoxyCodeLine{00087 }
\DoxyCodeLine{00088     \textcolor{keywordtype}{int} maxLocal;}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090     \textcolor{keywordtype}{bool} resultLocal = \mbox{\hyperlink{data_8cpp_abf9ef0211f65026775fa7c1056b754fe}{checkCriteriaLocal}}(localData, arraySize, 0, 1, \&maxLocal);}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092     CHECK(resultLocal == \textcolor{keyword}{true});}
\DoxyCodeLine{00093     CHECK(maxLocal == 46);}
\DoxyCodeLine{00094 \}}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096 TEST\_CASE(\textcolor{stringliteral}{"Check criteria for local data: false"}, \textcolor{stringliteral}{"[checkCriteriaLocal]"})}
\DoxyCodeLine{00097 \{}
\DoxyCodeLine{00098     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00099     \textcolor{keywordtype}{int} arraySize = 4;}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101     std::vector<int> d0 = \{12, 3, 4, 1\};}
\DoxyCodeLine{00102     std::vector<int> d1 = \{3, 1, 1, 1\};}
\DoxyCodeLine{00103     std::vector<int> d2 = \{4, 1, 38, 2\};}
\DoxyCodeLine{00104     std::vector<int> d3 = \{3, 2, 1, 25\};}
\DoxyCodeLine{00105     localData.push\_back(d0);}
\DoxyCodeLine{00106     localData.push\_back(d1);}
\DoxyCodeLine{00107     localData.push\_back(d2);}
\DoxyCodeLine{00108     localData.push\_back(d3);}
\DoxyCodeLine{00109 }
\DoxyCodeLine{00110     \textcolor{keywordtype}{int} maxLocal;}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112     \textcolor{keywordtype}{bool} resultLocal = \mbox{\hyperlink{data_8cpp_abf9ef0211f65026775fa7c1056b754fe}{checkCriteriaLocal}}(localData, arraySize, 0, 1, \&maxLocal);}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114     CHECK(resultLocal == \textcolor{keyword}{false});}
\DoxyCodeLine{00115     CHECK(maxLocal == 38);}
\DoxyCodeLine{00116 \}}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118 TEST\_CASE(\textcolor{stringliteral}{"Calculate Local B Lines: Process 0, 4 Lines, 4 Processes"}, \textcolor{stringliteral}{"[calculateBLocal]"})}
\DoxyCodeLine{00119 \{}
\DoxyCodeLine{00120     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00121     \textcolor{keywordtype}{int} arraySize = 4, myRank = 0, max = 12, processes = 4;}
\DoxyCodeLine{00122 }
\DoxyCodeLine{00123     std::vector<int> d0 = \{8, 1, 2, 2\};}
\DoxyCodeLine{00124     localData.push\_back(d0);}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126     \textcolor{keywordtype}{int} min, minX, minY;}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128     std::vector<std::vector<int>> localB = \mbox{\hyperlink{data_8cpp_a6fa50f0193e86a0cf4be42afd2aa3056}{calculateBLocal}}(localData, max, arraySize, myRank, processes, \&min, \&minX, \&minY);}
\DoxyCodeLine{00129 }
\DoxyCodeLine{00130     std::vector<std::vector<int>> controlB;}
\DoxyCodeLine{00131 }
\DoxyCodeLine{00132     std::vector<int> c0 = \{12, 11, 10, 10\};}
\DoxyCodeLine{00133     controlB.push\_back(c0);}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135     CHECK(localB[0][0] == controlB[0][0]);}
\DoxyCodeLine{00136     CHECK(localB[0][1] == controlB[0][1]);}
\DoxyCodeLine{00137     CHECK(localB[0][2] == controlB[0][2]);}
\DoxyCodeLine{00138     CHECK(localB[0][3] == controlB[0][3]);}
\DoxyCodeLine{00139 }
\DoxyCodeLine{00140     CHECK(min == 10);}
\DoxyCodeLine{00141     CHECK(minX == 0);}
\DoxyCodeLine{00142     CHECK(minY == 2);}
\DoxyCodeLine{00143 \}}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145 TEST\_CASE(\textcolor{stringliteral}{"Calculate Local B Lines: Process 1, 4 Lines, 4 Processes"}, \textcolor{stringliteral}{"[calculateBLocal]"})}
\DoxyCodeLine{00146 \{}
\DoxyCodeLine{00147     std::vector<std::vector<int>> localData;}
\DoxyCodeLine{00148     \textcolor{keywordtype}{int} arraySize = 4, myRank = 1, max = 12, processes = 4;}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150     std::vector<int> d0 = \{2, 12, 4, 1\};}
\DoxyCodeLine{00151     localData.push\_back(d0);}
\DoxyCodeLine{00152 }
\DoxyCodeLine{00153     \textcolor{keywordtype}{int} min, minX, minY;}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155     std::vector<std::vector<int>> localB = \mbox{\hyperlink{data_8cpp_a6fa50f0193e86a0cf4be42afd2aa3056}{calculateBLocal}}(localData, max, arraySize, myRank, processes, \&min, \&minX, \&minY);}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157     std::vector<std::vector<int>> controlB;}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159     std::vector<int> c0 = \{10, 12, 8, 11\};}
\DoxyCodeLine{00160     controlB.push\_back(c0);}
\DoxyCodeLine{00161 }
\DoxyCodeLine{00162     CHECK(localB[0][0] == controlB[0][0]);}
\DoxyCodeLine{00163     CHECK(localB[0][1] == controlB[0][1]);}
\DoxyCodeLine{00164     CHECK(localB[0][2] == controlB[0][2]);}
\DoxyCodeLine{00165     CHECK(localB[0][3] == controlB[0][3]);}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167     CHECK(min == 8);}
\DoxyCodeLine{00168     CHECK(minX == 1);}
\DoxyCodeLine{00169     CHECK(minY == 2);}
\DoxyCodeLine{00170 \}}

\end{DoxyCode}
